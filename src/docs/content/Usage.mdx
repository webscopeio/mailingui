import { EmailSourceTabs } from "src/docs/components/MdxComponents";

import {
  Tabs,
  TabsContent,
  TabsList,
  TabsTrigger,
} from "@components/Tabs/Tabs";

# Usage

As **MailingUI** is collection of email components developed on top of [react-email](https://react.email) library, it also utilize its rendering capabilities to efficiently generate accurate HTML markup that is optimized for various email clients. Once the HTML markup is rendered, you have the flexibility to employ any preferred email sending service or library to effectively deliver your emails.

Here we present quick guide how to use **MailingUI** with [Resend](https://resend.com/) or [Nodemailer](https://nodemailer.com) providers.

## 1. Install dependencies

For **MailingUI** install [see Installation section](/docs/installation).

<Tabs defaultValue="resend">
  <div className="flex items-center justify-start w-full mb-8">
    <TabsList className="rounded-2xl">
      <TabsTrigger value="resend" className="px-7 py-2 rounded-[10px]">Using Resend</TabsTrigger>
      <TabsTrigger value="nodemailer" className="px-7 py-2 rounded-[10px]">Using Nodemailer</TabsTrigger>
    </TabsList>
  </div>

  <TabsContent value="resend">
    ```bash
    npm install resend
    ```
  </TabsContent>
  <TabsContent value="nodemailer">
    ```bash
    npm install nodemailer
    ```
  </TabsContent>
</Tabs>

## 2. Create email template

You can use both **MailingUI** components installed and and any other _react-email_ components to create email template. For example:

<EmailSourceTabs emailId="hello-world" />

## 3. Send email

<Tabs defaultValue="resend">
  <div className="flex items-center justify-start w-full mb-8">
    <TabsList className="rounded-2xl">
      <TabsTrigger value="resend" className="px-7 py-2 rounded-[10px]">Using Resend</TabsTrigger>
      <TabsTrigger value="nodemailer" className="px-7 py-2 rounded-[10px]">Using Nodemailer</TabsTrigger>
    </TabsList>
  </div>

  <TabsContent value="resend">
    Given _Resend_ is operated by same team as _react-email_, email rendering is built-in in _Resend's SDK_. Thus you can use its sendEmail method directly.

    <br/>

    ```js
      import { Resend } from "resend";
      import HelloWorldEmail from "./hello-world";

      const resend = new Resend("resend-api-key");

      resend.emails.send({
        from: "mailingui@example.com",
        to: "user@mail.com",
        subject: "hello world",
        react: HelloWorldEmail(),
      });
    ```

  </TabsContent>
  <TabsContent value="nodemailer">
    With Nodemailer (and generally most others providers) you need to render email template first and then send it with provider's API.
    
    <br/>
    
    ```js
      import { render } from "@react-email/render";
      import nodemailer from "nodemailer";
      import HelloWorldEmail from "./hello-world";

      const transporter = nodemailer.createTransport({
        host: "smtp.forwardemail.net",
        port: 465,
        secure: true,
        auth: {
          user: "my_user",
          pass: "my_password",
        },
      });

      const emailHtml = render(HelloWorldEmail());
      const options = {
        from: 'mailingui@example.com',
        to: 'user@mail.com',
        subject: 'hello world',
        html: emailHtml,
      };
      await transporter.sendMail(options);
    ```

  </TabsContent>
</Tabs>

# Usefull links

To gain a deeper understanding of how to utilize the rendering utility, please refer to the React Email documentation. Within the same resource, you'll also discover additional examples showcasing integrations with various email sending services.

- [render utility](https://react.email/docs/utilities/render)
- [react-email integrations](https://react.email/docs/integrations/overview)
